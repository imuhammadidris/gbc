!function(t){var o={init:function(o){var e={direction:"left",loop:-1,scrolldelay:0,scrollamount:50,circular:!0,drag:!0,runshort:!0,hoverstop:!0,inverthover:!1,xml:!1};return o&&t.extend(e,o),this.each(function(){var o="mouseenter",s="mouseleave";e.inverthover&&(o="mouseleave",s="mouseenter");var i=e.loop,n=t(this).addClass("str_wrap"),r=!1,l=function(){n.off("mouseleave"),n.off("mouseenter"),n.off("mousemove"),n.off("mousedown"),n.off("mouseup"),t(".str_move",n).length||n.wrapInner(t("<div>").addClass("str_move"));var l=t(".str_move",n).addClass("str_origin"),a=l.clone().removeClass("str_origin").addClass("str_move_clone");e.hoverstop||n.addClass("noStop");var c=function(){a.clone().css({left:"100%",right:"auto",width:l.width()}).appendTo(l),a.css({right:"100%",left:"auto",width:l.width()}).appendTo(l)},f=function(){a.clone().css({top:"100%",bottom:"auto",height:l.height()}).appendTo(l),a.css({bottom:"100%",top:"auto",height:l.height()}).appendTo(l)};if("left"==e.direction)if(n.height(l.outerHeight()),l.width()>n.width()){var h=-l.width();e.circular&&(e.xml||(c(),h=-(l.width()+(l.width()-n.width())))),e.xml&&l.css({left:n.width()});var u=n.width(),v=0,d=!1,p=function(){var o,s;0!=i&&l.stop(!0).animate({left:h},(o=Math.abs(h),s=o/e.scrollamount*1e3,0!=parseFloat(l.css("left"))&&(s=((o+=n.width())-(n.width()-parseFloat(l.css("left"))))/e.scrollamount*1e3),s),"linear",function(){t(this).css({left:n.width()}),-1==i?d=setTimeout(p,e.scrolldelay):(i--,d=setTimeout(p,e.scrolldelay))})};e.inverthover||p(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),clearTimeout(d),l.stop(!0)}).on(s,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),p()}),e.drag?n.on("mousedown",function(o){var s,i,a;e.inverthover&&l.stop(!0);var c=o.clientX;return u=l.position().left,v=u-(o.clientX-n.offset().left),t(this).on("mousemove",function(t){r=!0,a=t.clientX,i=a>c?1:-1,c=a,(s=v+(t.clientX-n.offset().left))<-l.width()&&i<0&&(s=0,u=l.position().left,v=u-(t.clientX-n.offset().left)),s>0&&i>0&&(s=-l.width(),u=l.position().left,v=u-(t.clientX-n.offset().left)),l.stop(!0).css({left:s})}).on("mouseup",function(){t(this).off("mousemove"),e.inverthover&&l.trigger("mouseenter"),setTimeout(function(){r=!1},50)}).on("click",function(){if(r)return!1}),!1}):n.addClass("no_drag"))}else if(e.runshort){l.css({left:n.width()});u=n.width(),v=0;var m=function(){return(l.width()+l.position().left)/e.scrollamount*1e3},g=function(){var o=-l.width();l.animate({left:o},m(),"linear",function(){t(this).css({left:n.width()}),-1==i?setTimeout(g,e.scrolldelay):(i--,setTimeout(g,e.scrolldelay))})};e.inverthover||g(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(s,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),g()}),e.drag?n.on("mousedown",function(o){return e.inverthover&&l.stop(!0),u=l.position().left,v=u-(o.clientX-n.offset().left),t(this).on("mousemove",function(t){l.stop(!0).css({left:v+(t.clientX-n.offset().left)})}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove")}),!1}):n.addClass("no_drag"))}else n.addClass("str_static");if("right"==e.direction)if(n.height(l.outerHeight()),n.addClass("str_right"),l.css({left:-l.width(),right:"auto"}),l.width()>n.width()){h=n.width();l.css({left:0}),e.circular&&(e.xml||(c(),h=l.width()));var w=0;m=function(){var t=n.width(),o=t/e.scrollamount*1e3;return 0!=parseFloat(l.css("left"))&&(o=((t=l.width()+n.width())-(l.width()+parseFloat(l.css("left"))))/e.scrollamount*1e3),o};g=function(){0!=i&&l.animate({left:h},m(),"linear",function(){t(this).css({left:-l.width()}),-1==i?setTimeout(g,e.scrolldelay):(i--,setTimeout(g,e.scrolldelay))})};e.inverthover||g(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(s,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),g()}),e.drag?n.on("mousedown",function(o){var s,i,r;e.inverthover&&l.stop(!0);var a=o.clientX;return u=l.position().left,w=u-(o.clientX-n.offset().left),t(this).on("mousemove",function(t){r=t.clientX,i=r>a?1:-1,a=r,(s=w+t.clientX-n.offset().left)<-l.width()&&i<0&&(s=0,u=l.position().left,w=u-(t.clientX-n.offset().left)),s>0&&i>0&&(s=-l.width(),u=l.position().left,w=u-(t.clientX-n.offset().left)),l.stop(!0).css({left:s})}),!1}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove")}):n.addClass("no_drag"))}else if(e.runshort){w=0,m=function(){return(n.width()-l.position().left)/e.scrollamount*1e3},g=function(){var o=n.width();l.animate({left:o},m(),"linear",function(){t(this).css({left:-l.width()}),-1==i?setTimeout(g,e.scrolldelay):(i--,setTimeout(g,e.scrolldelay))})};e.inverthover||g(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(s,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),g()}),e.drag?n.on("mousedown",function(o){return e.inverthover&&l.stop(!0),u=l.position().left,w=u-(o.clientX-n.offset().left),t(this).on("mousemove",function(t){l.stop(!0).css({left:w+t.clientX-n.offset().left})}),!1}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove")}):n.addClass("no_drag"))}else n.addClass("str_static");if("up"==e.direction)if(n.addClass("str_vertical"),l.height()>n.height()){var _=-l.height();e.circular&&(e.xml||(f(),_=-(l.height()+(l.height()-n.height())))),e.xml&&l.css({top:n.height()});w=0;m=function(){var t=Math.abs(_),o=t/e.scrollamount*1e3;return 0!=parseFloat(l.css("top"))&&(o=((t+=n.height())-(n.height()-parseFloat(l.css("top"))))/e.scrollamount*1e3),o};g=function(){0!=i&&l.animate({top:_},m(),"linear",function(){t(this).css({top:n.height()}),-1==i?setTimeout(g,e.scrolldelay):(i--,setTimeout(g,e.scrolldelay))})};e.inverthover||g(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(s,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),g()}),e.drag?n.on("mousedown",function(o){var s,i,r;e.inverthover&&l.stop(!0);var a=o.clientY;return strMoveTop=l.position().top,w=strMoveTop-(o.clientY-n.offset().top),t(this).on("mousemove",function(t){r=t.clientY,i=r>a?1:-1,a=r,(s=w+t.clientY-n.offset().top)<-l.height()&&i<0&&(s=0,strMoveTop=l.position().top,w=strMoveTop-(t.clientY-n.offset().top)),s>0&&i>0&&(s=-l.height(),strMoveTop=l.position().top,w=strMoveTop-(t.clientY-n.offset().top)),l.stop(!0).css({top:s})}),!1}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove")}):n.addClass("no_drag"))}else if(e.runshort){l.css({top:n.height()});w=0,m=function(){return(l.height()+l.position().top)/e.scrollamount*1e3},g=function(){var o=-l.height();l.animate({top:o},m(),"linear",function(){t(this).css({top:n.height()}),-1==i?setTimeout(g,e.scrolldelay):(i--,setTimeout(g,e.scrolldelay))})};e.inverthover||g(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(s,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),g()}),e.drag?n.on("mousedown",function(o){return e.inverthover&&l.stop(!0),strMoveTop=l.position().top,w=strMoveTop-(o.clientY-n.offset().top),t(this).on("mousemove",function(t){l.stop(!0).css({top:w+t.clientY-n.offset().top})}),!1}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove")}):n.addClass("no_drag"))}else n.addClass("str_static");if("down"==e.direction)if(n.addClass("str_vertical").addClass("str_down"),l.css({top:-l.height(),bottom:"auto"}),l.height()>n.height()){_=n.height();e.circular&&(e.xml||(f(),_=l.height())),e.xml&&l.css({top:-l.height()});w=0;m=function(){var t=n.height(),o=t/e.scrollamount*1e3;return 0!=parseFloat(l.css("top"))&&(o=((t=l.height()+n.height())-(l.height()+parseFloat(l.css("top"))))/e.scrollamount*1e3),o};g=function(){0!=i&&l.animate({top:_},m(),"linear",function(){t(this).css({top:-l.height()}),-1==i?setTimeout(g,e.scrolldelay):(i--,setTimeout(g,e.scrolldelay))})};e.inverthover||g(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(s,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),g()}),e.drag?n.on("mousedown",function(o){var s,i,r;e.inverthover&&l.stop(!0);var a=o.clientY;return strMoveTop=l.position().top,w=strMoveTop-(o.clientY-n.offset().top),t(this).on("mousemove",function(t){r=t.clientY,i=r>a?1:-1,a=r,(s=w+t.clientY-n.offset().top)<-l.height()&&i<0&&(s=0,strMoveTop=l.position().top,w=strMoveTop-(t.clientY-n.offset().top)),s>0&&i>0&&(s=-l.height(),strMoveTop=l.position().top,w=strMoveTop-(t.clientY-n.offset().top)),l.stop(!0).css({top:s})}),!1}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove")}):n.addClass("no_drag"))}else if(e.runshort){w=0,m=function(){return(n.height()-l.position().top)/e.scrollamount*1e3},g=function(){var o=n.height();l.animate({top:o},m(),"linear",function(){t(this).css({top:-l.height()}),-1==i?setTimeout(g,e.scrolldelay):(i--,setTimeout(g,e.scrolldelay))})};e.inverthover||g(),e.hoverstop&&(n.on(o,function(){t(this).addClass("str_active"),l.stop(!0)}).on(s,function(){t(this).removeClass("str_active"),t(this).off("mousemove"),g()}),e.drag?n.on("mousedown",function(o){return e.inverthover&&l.stop(!0),strMoveTop=l.position().top,w=strMoveTop-(o.clientY-n.offset().top),t(this).on("mousemove",function(t){l.stop(!0).css({top:w+t.clientY-n.offset().top})}),!1}).on("mouseup",function(){e.inverthover&&l.trigger("mouseenter"),t(this).off("mousemove")}):n.addClass("no_drag"))}else n.addClass("str_static")};e.xml?t.ajax({url:e.xml,dataType:"xml",success:function(o){for(var s=t(o).find("text"),i=s.length,r=0;r<i;r++){var a=s.eq(r).text(),c=t("<span>").text(a).appendTo(n);"left"!=e.direction&&"right"!=e.direction||(c.css({display:"inline-block",textAlign:"right"}),r>0&&c.css({width:n.width()+c.width()})),"down"!=e.direction&&"up"!=e.direction||(c.css({display:"block",textAlign:"left"}),r>0&&c.css({paddingTop:n.height()}))}l()}}):l(),n.data({ini:l})})},update:function(){var o=t(this),e=t(".str_origin",o),s=t(".str_move_clone",o);e.stop(!0),s.remove(),o.data("ini")()}};t.fn.liMarquee=function(e){return o[e]?o[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Метод "+e+" в jQuery.liMarquee не существует"):o.init.apply(this,arguments)}}(jQuery);
!function(n,t){"use strict";n.cryptex_woocommerce_mod=n.cryptex_woocommerce_mod||{},n.cryptex_woocommerce_mod={sameheight:function(t){var e=n(this),o=0;e.find(".owl-item").children().css("height","auto").each(function(){o=Math.max(o,n(this).outerHeight())}).promise().done(function(){n(this).css("height",o)})},owlGetVisibleElements:function(){var t=n(this);t.find(".owl-item").removeClass("first last"),t.find(".owl-item.active").first().addClass("first"),t.find(".owl-item.active").last().addClass("last")}},n.cryptex_woocommerce_mod.zoom=function(){n(".image-preview-container").length&&n(".image-preview-container").each(function(){var t=n(this);n("#img-zoom",t).length&&n("#img-zoom",t).elevateZoom({gallery:"thumbnails",galleryActiveClass:"active",zoomType:"inner",cursor:"crosshair",responsive:!0,zoomWindowFadeIn:500,zoomWindowFadeOut:500,easing:!0,lensFadeIn:500,lensFadeOut:500})})},n.cryptex_woocommerce_mod.thumbs_carousel=function(){n(".flex-control-nav").length&&n(".flex-control-nav").owlCarousel({items:4,URLhashListener:!1,navSpeed:800,nav:!0,loop:!0,margin:10,rtl:!!n.cryptex_core.SUPPORT.ISRTL,navText:!1,responsive:{0:{items:3},481:{items:3},1200:{items:4}}}).off("change.owl.carousel")},n.cryptex_woocommerce_mod.qty=function(){n(document).on("click",".qty-plus, .qty-minus",function(t){t.preventDefault();var e=n(this).closest(".quantity").find(".input-text"),o=parseFloat(e.val()),a=parseFloat(e.attr("max")),r=parseFloat(e.attr("min")),c=e.attr("step");o&&""!==o&&"NaN"!==o||(o=0),""!==a&&"NaN"!==a||(a=""),""!==r&&"NaN"!==r||(r=0),"any"!==c&&""!==c&&void 0!==c&&"NaN"!==parseFloat(c)||(c=1),n(this).is(".qty-plus")?a&&(a==o||a<o)?e.val(a):e.val(o+parseFloat(c)):r&&(r==o||o<r)?e.val(r):0<o&&e.val(o-parseFloat(c)),e.trigger("change input"),n('.woocommerce-cart-form :input[name="update_cart"]').prop("disabled",!1)})},n.cryptex_woocommerce_mod.cart=function(){({init:function(){var t=this;t.support={touchevents:Modernizr.touchevents,transitions:Modernizr.csstransitions},t.eventtype=t.support.touchevents?"touchstart":"click",t.listeners()},listeners:function(){var t=this;t.track_ajax_refresh_cart(t),t.track_ajax_adding_to_cart(),t.track_ajax_added_to_cart(t)},track_ajax_refresh_cart:function(e){n.ajax({type:"POST",dataType:"json",url:cryptex_global_vars.ajaxurl,data:{action:"cryptex_refresh_cart_fragment"},success:function(t){e.update_cart_fragment(t.fragments),n("body").trigger("wc_fragments_loaded")}}),n("body").on("wc_fragments_refreshed wc_fragments_loaded",function(t){e.update_cart_dropdown(e)})},track_ajax_adding_to_cart:function(){n("body").on("adding_to_cart",function(t,e,o){t.preventDefault(),e.block({message:null,overlayCSS:{background:"#fff url("+cryptex_global_vars.ajax_loader_url+") no-repeat center",backgroundSize:"16px 16px",borderRadius:cryptex_global_vars.button_border_small,opacity:.6}})})},track_ajax_added_to_cart:function(t){n("body").on("added_to_cart",function(t,e,o,a){a.unblock().hide()})},update_cart_dropdown:function(t){this.ajax_remove_cart_item(this)},update_cart_fragment:function(t){t&&n.each(t,function(t,e){n(t).replaceWith(e)})},ajax_remove_cart_item:function(a){n(".shopping-cart .remove").on(a.eventtype,function(t){t.preventDefault();var o=n(this);n.ajax({type:"POST",dataType:"json",url:cryptex_global_vars.ajaxurl,data:{action:"cryptex_cart_item_remove",_wpnonce:cryptex_woocommerce_mod.nonce_cart_item_remove,cart_item_key:o.data("cart_item_key")},success:function(t){var e=t.fragments;e&&o.parent().animate({opacity:0},function(){var t=n(this);t.slideUp(350,function(){t.remove(),a.update_cart_fragment(e),n("body").trigger("wc_fragments_refreshed")})})}})})}}).init()},n(t).load(function(){n.cryptex_woocommerce_mod.thumbs_carousel()}),n(function(){n(document).on("click",".zoomImg",function(t){t.preventDefault(),n(".woocommerce-product-gallery__trigger").trigger("click")}),n.cryptex_woocommerce_mod.cart(),n.cryptex_woocommerce_mod.zoom(),n.cryptex_woocommerce_mod.qty()})}(jQuery,window);